<!doctype html>
<html lang="en" class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="canonical" href="https://html5-templates.com/" />
    <title>ProtVec2GO</title>
    <meta name="description" content="Simple HTML5 Page layout template with header, footer, sidebar etc.">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
	<header>
		<div id="logo">Gene Ontology Pipeline</div>
		<nav>  
			<ul>
				<li><a href="/">Home</a>
				<li><a href="https://html-css-js.com/">HTML</a>
				<li><a href="https://html-css-js.com/css/code/">CSS</a>
				<li><a href="https://htmlcheatsheet.com/js/">JS</a>
			</ul>
        </nav>
	</header>
	<section id="pageContent">
		<main role="main">
			<article>
				<h1>Pipeline Form</h1>
				<p>
                    Select pipeline settings below and then submit to download a formatted dataset.
                </p>

                <script>
                      function get_results_path() {
                        var dataset_form = document.getElementById("dataset_form");
                        var inputs = document.getElementById("dataset_form").elements;
                        form_string = ""
                        // Iterate over the form controls
                        for (i = 0; i < inputs.length; i++) {
                            form_string = form_string + inputs[i].outerHTML
                        }
                        console.log(form_string);
                        string_hash = cyrb53(form_string)
                        console.log("string hash", string_hash)
                        return '/results/' + string_hash
                    }

                    const cyrb53 = function(str, seed = 0) {
                        let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;
                        for (let i = 0, ch; i < str.length; i++) {
                            ch = str.charCodeAt(i);
                            h1 = Math.imul(h1 ^ ch, 2654435761);
                            h2 = Math.imul(h2 ^ ch, 1597334677);
                        }
                        h1 = Math.imul(h1 ^ (h1>>>16), 2246822507) ^ Math.imul(h2 ^ (h2>>>13), 3266489909);
                        h2 = Math.imul(h2 ^ (h2>>>16), 2246822507) ^ Math.imul(h1 ^ (h1>>>13), 3266489909);
                        return 4294967296 * (2097151 & h2) + (h1>>>0);
                    };
                </script>

                <form id="dataset_form", target="_blank", action="/server" method="post"> 
                    <input id="form_content_id" name="form_content_id" type="hidden" value="UNINITIALIZED">
                    <div class="checkbox_entry">
                        <ul>
                            <li>Select Evidence Codes</li>
                            <li><input type='checkbox' id='EXP' name='EXP' value="True" checked> 
                                <label for='EXP'> EXP</label>
                               <input type='checkbox' id='IDA' name='IDA' value="True"> 
                                <label for='IDA'> IDA</label>
                               <input type='checkbox' id='IPI' name='IPI' value="True"> 
                                <label for='IPI'> IPI</label>
                               <input type='checkbox' id='IMP' name='IMP' value="True"> 
                                <label for='IMP'> IMP</label>
                               <input type='checkbox' id='IGI' name='IGI' value="True"> 
                                <label for='IGI'> IGI</label>
                               <input type='checkbox' id='IEP' name='IEP' value="True"> 
                                <label for='IEP'> IEP</label>
                            </li>
                            <li>
                                <input type='checkbox' id='TAS' name='TAS' value="True"> 
                                <label for='TAS'> TAS</label>
                                <input type='checkbox' id='NC' name='NC' value="True"> 
                                <label for='NC'> NC</label>
                            </li>
                            <li>
                                <input type='checkbox' id='HTP' name='HTP' value="True"> 
                                <label for='HTP'> HTP</label>
                                <input type='checkbox' id='HDA' name='HDA' value="True"> 
                                <label for='HDA'> HDA</label>
                                <input type='checkbox' id='HMP' name='HMP' value="True"> 
                                <label for='HMP'> HMP</label>
                                <input type='checkbox' id='HGI' name='HGI' value="True"> 
                                <label for='HGI'> HGI</label>
                                <input type='checkbox' id='HEP' name='HEP' value="True"> 
                                <label for='HEP'> HEP</label>
                            </li>
                            <li>
                                <input type='checkbox' id='IBA' name='IBA' value="True"> 
                                <label for='IBA'> IBA</label>
                                <input type='checkbox' id='IBD' name='IBD' value="True"> 
                                <label for='IBD'> IBD</label>
                                <input type='checkbox' id='IKR' name='IKR' value="True"> 
                                <label for='IKR'> IKR</label>
                                <input type='checkbox' id='IRD' name='IRD' value="True"> 
                                <label for='IRD'> IRD</label>
                                <input type='checkbox' id='ISS' name='ISS' value="True"> 
                                <label for='ISS'> ISS</label>
                                <input type='checkbox' id='ISO' name='ISO' value="True"> 
                                <label for='ISO'> ISO</label>
                                <input type='checkbox' id='ISA' name='ISA' value="True"> 
                                <label for='ISA'> ISA</label>
                                <input type='checkbox' id='ISM' name='ISM' value="True"> 
                                <label for='ISM'> ISM</label>
                                <input type='checkbox' id='IGC' name='IGC' value="True"> 
                                <label for='IGC'> IGC</label>
                            </li>
                            <li>
                                <input type='checkbox' id='RCA' name='RCA' value="True"> 
                                <label for='RCA'> RCA</label>
                                <input type='checkbox' id='E' name='E' value="True"> 
                                <label for='E'> E</label>
                                <input type='checkbox' id='NAS' name='NAS' value="True"> 
                                <label for='NAS'> NAS</label>
                                <input type='checkbox' id='ND' name='ND' value="True"> 
                                <label for='ND'> ND</label>
                            </li>
                        </ul>
                    </div>
                    <div class="checkbox_entry">
                        <ul>
                            <li>Select Namespaces</li>
                            <li>
                                <input type="checkbox" id="biological_process" name="biological_process" value="True" checked> 
                                <label for="biological_process"> Biological Process</label>
                                <input type="checkbox" id="molecular_function" name="molecular_function" value="True" checked> 
                                <label for="molecular_function"> Molecular Function</label>
                                <input type="checkbox" id="cellular_component" name="cellular_component" value="True" checked> 
                                <label for="cellular_component"> Cellular Component</label>
                            </li>
                        </ul>
                    </div>
                    <div class="checkbox_entry">
                        <ul>
                            <li>
                                <input type="checkbox" id="propogate_annotations" name="propogate_annotations" value="True" checked> 
                                <label for="propogate_annotations"> Propogate Annotations</label>
                            </li>
                            <li>
                                <input type="checkbox" id="include_estimated_negative_annotations" name="include_estimated_negative_annotations" value="True" checked> 
                                <label for="include_estimated_negative_annotations"> Include Estimated Negative Annotations</label>
                            </li>
                        </ul>
                    </div>
                    <div class="checkbox_entry">
                        <ul>
                            <li>Select filtration method for Gene Ontology terms.</li>
                            <li>

                                <table style="padding: 25px; border-spacing: 25px">
                                    <!-- <tr>
                                        <td>
                                            <input type="checkbox" id="top_k" name="top_k" value="True" checked> 
                                            <label for="top_k"> Top K Terms</label> <br>
                                        </td>
                                        <td>
                                            <label for="count"> Number of terms</label>
                                            <input type="number" id="count" name="count" value=120>
                                        </td>
                                    </tr> -->
                                    <tr> 
                                        <td>
                                            <input type="checkbox" id="min_samples" name="min_samples" value="True" checked> 
                                            <label for="threshold"> Threshold <br> </label>
                                        </td>
                                        <td>
                                            <label for="count"> GO Term Appearance Threshold</label>
                                            <input type="number" id="count" name="GO Term Appearance Threshold" value=50>
                                        </td>
                                    </tr>
                                
                                
                                </table>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <button id="form_submit" , onclick="window.location.href=get_results_path()">Submit Form</button>
                    </div>
                </form>
            </article>
		</main>
		<aside>
			<div class="sidebar"><a href="https://html-css-js.com/">ProtVec2GO Paper</a></div>
			<div class="sidebar"><a href="https://html-css-js.com/">Documentation</a></div>
			<div class="sidebar"><a href="https://html-css-js.com/">Mofrad Lab</a></div>
		</aside>
	</section>
	<footer>
		<p>&copy; Website based on: <a href="https://html5-templates.com/" target="_blank" rel="nofollow">HTML5 Templates</a></p>
		<address>
			Contact: <a href="amdickson@berkeley.edu">Andrew Dickson</a>
		</address>
    </footer>
    <script type="text/javascript" src="{{ url_for('static', filename='js/form_handling.js') }}"></script>
</body>
</html>
